---
deployment:
  tasks:
    # ‚úÖ Define o caminho do deploy no servidor
    - export DEPLOYPATH=/home/hg4bea48/public_html/

    # ‚úÖ Exibe no log que o deploy come√ßou
    - echo "üöÄ Iniciando deploy para $DEPLOYPATH"

    # ‚úÖ Remove arquivos tempor√°rios e caches anteriores (opcional)
    - /bin/rm -rf ${DEPLOYPATH}tmp/*
    - /bin/rm -rf ${DEPLOYPATH}cache/*

    # ‚úÖ Copia todos os arquivos do reposit√≥rio para o diret√≥rio p√∫blico
    # ‚ùó N√£o sobrescreve config.php se ele j√° existir no servidor
    - /usr/bin/rsync -avz --exclude 'config.php' --exclude '.git/' --exclude '.gitignore' ./ $DEPLOYPATH

    # ‚úÖ Ajusta permiss√µes de pastas e arquivos (seguran√ßa)
    - /bin/find $DEPLOYPATH -type d -exec chmod 755 {} \;
    - /bin/find $DEPLOYPATH -type f -exec chmod 644 {} \;

    # ‚úÖ Mensagem de sucesso
    - echo "‚úÖ Deploy conclu√≠do com sucesso!"
